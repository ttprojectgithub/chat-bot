<section class="chat-room" dir="rtl" aria-label="专 爪'">
  <h1 class="chat-title"> 专 爪' 砖 Angular </h1>

  <div class="messages-container"
       role="log"
       aria-live="polite"
       aria-atomic="false"
       aria-relevant="additions">
    <div *ngFor="let msg of messages(); let i = index" [ngClass]="msg.sender" class="message" @fadeInUp tabindex="0">
      <div class="avatar" [ngClass]="msg.sender" aria-hidden="true">
        {{ msg.sender === 'user' ? '转' : '' }}
      </div>

      <div class="message-bubble">
        <ng-container *ngIf="editingIndex !== i; else editMode">
          <span class="message-content" dir="rtl" [innerHTML]="msg.content"></span>
          <div *ngIf="msg.sender === 'bot'" class="message-actions" aria-label="驻砖专转 砖">
            <div class="feedback-buttons">
              <button aria-label="转 转 转砖" title="转"></button>
              <button aria-label=" 转 转 转砖" title=" 转"></button>
            </div>
            <button class="copy-button" (click)="copyToClipboard(msg.content)" aria-label="注转拽 转砖"></button>
          </div>
          <button *ngIf="msg.sender === 'user'" class="copy-button" style="left: 2rem" (click)="startEdit(i, msg.content)">锔</button>
        </ng-container>

        <ng-template #editMode>
          <form [formGroup]="editForm" (ngSubmit)="saveEdit(i)" class="edit-form">
            <input formControlName="editMessage" type="text" placeholder="注专 注...">
            <button type="submit">砖专</button>
            <button type="button" (click)="cancelEdit()"></button>
          </form>
        </ng-template>
      </div>
    </div>
  </div>

  <form [formGroup]="form" (ngSubmit)="sendMessage()" class="chat-input-form" aria-label="砖 注">
    <input formControlName="message"
           type="text"
           placeholder="转 注..."
           aria-label="转 注 注专转 爪'"
           autocomplete="off" />
    <button type="submit" [disabled]="form.invalid" aria-label="砖 注">砖</button>
  </form>

  <loading-spinner *ngIf="isLoading()" aria-live="assertive" />

  <div *ngIf="copied()" class="toast" aria-live="polite">
    锔 注转拽!
  </div>
</section>
